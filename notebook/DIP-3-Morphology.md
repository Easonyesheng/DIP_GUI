# 图像处理总结3

二值形态学  
**形态学起源于法国巴黎高等矿业学院，因为人家是搞地质的。**  
**可见一斑，形态学的精要就是在于将图像看作是等高线组成的地形图，他的基本操作就是动土，平高填低等等。**  
当然，这是哲学层面的抽象概念，太玄，还是整点实际的。  
==需要注意的是，这里处理的图片都是二值图片（0 or 1）。==  

------

## 基本操作

**结构元素（SE）**  
就是你要动土的那块地方多大，以及要怎么动土。  

**腐蚀（Erosion）：**  
先看公式：$E(F,k)=F\bigodot k=\bigcap (\{ a+b|a \in F\})$  
F：原图，k：SE
这里就有两种看法。  
第一种，核心：*平移*  
原图按照结构元素平移，在原图大小里取交集。  
这里要关心SE的中心在哪里，SE里有1的地方就是要平移的方向。  
第二种，核心：*盖章*  
SE在原图上平移，只有能够完全包住SE的位置的点置1，其他置0.  
==腐蚀能够让抹去图片上的小亮点，打断小连接，总之会让图片中亮处整体缩小。==  

**膨胀（Dilation）：**  
公式：$D(F,k)=F\bigoplus k=\bigcup (\{ a-b|a\in F\})$  
同样的两种看法，平移的时候是取并集，盖章的时候是只要SE有于原图区域中重合的地方，中心点就置1。  
==膨胀能够让图片亮处整体扩大。==  

**开（Open）：**
先腐蚀后膨胀。  
==可以抹去图片中size小于SE的点和连接，而不会对其他的部分造成大的破坏。==  

**闭（Close）：**
先膨胀再腐蚀。  
==可以填补小于SE size的空洞，弥合size小于SE的裂缝，而不会对其他的部分造成大的破坏。==  

------

## 组合算法

### Distance Transform(距离变换)

这种操作就是用一个flat的SE，给原图作连续的腐蚀，原图上每个点的值替换为n(最后拉伸到0-255)，这个点在第n次腐蚀时消失。  
直观感觉就是将图片中间的点变亮，周围的点变暗，此时二值图变为灰度图。  

### Skeleton(骨架提取)

这种操作直观上是提取出原图形状的中心线，即骨架。  
是有公式的：
$Result = \bigcup S_i(F)$ 
$S_i(F) = F \bigodot r_ik - {(F \bigodot r_ik)\circ r_ik}$

### Edge(形态学边缘)

用原图减去腐蚀后的图，或者用膨胀图减去原图，或者用膨胀图减去腐蚀图。  
都可以得到原图物体的边缘。  

### Conditional Dilation(条件膨胀)

这是一个很有意思，也很有用的算法。  
有什么用呢？--==可以通过这个算法去分离原图中两个不相连的part。==  
条件是只要知道一个物体的一个点在哪里。  
然后就对这个点作连续膨胀，每次膨胀都和原图作逻辑操作中的“与“操作。  
这样就可以保证膨胀出的内容不会超过原图的内容。  
而当每次”与“之后稳定了，就分出了想要的part。  

------

## Code

这里的算法都可以在我的GitHub里的[项目](https://github.com/Easonyesheng/DIP_GUI)里找到  
该项目是一个包括阈值分割、卷积滤波、形态学和灰度形态学的数字图像处理算法集合  
用法见readme文件。
且带有GUI，有很好的演示效果  
觉得可以别忘了star哦  
